<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- 用户勋章mapper -->
<mapper namespace="com.yf.pet.dao.medal.UserMedalDao">
    <!-- 用户勋章map对象 -->
    <resultMap id="MedailRuleMap" type="com.yf.pet.entity.medal.UserMedal">
        <result column="user_id" property="userId"/>
        <result column="medal_id" property="medalId"/>
        <result column="timestamp" property="timestamp"/>
        <result column="timezone" property="timezone"/>
    </resultMap>

    <!--新增用户勋章-->
    <insert id="addUserMedals">
        INSERT INTO t_user_medal(user_id,medal_id,timestamp,timezone)
        VALUES
        <foreach collection="list" index="index" item="item" separator=",">
            (#{item.userId},#{item.medalId},#{item.timestamp},#{item.timezone})
        </foreach>
    </insert>

    <!--查询勋章信息-->
    <select id="findUserMedals" resultMap="MedailRuleMap">
        SELECT medal_id,timestamp,timezone
        FROM t_user_medal
        WHERE user_id = #{userId}
        ORDER BY timestamp DESC
    </select>
</mapper>